<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Detalle de Alerta</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        video {
            width: 100%;
            max-width: 640px;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="container mt-5">
    <h3>⚠️ Alerta Detectada</h3>
    <p><strong>Hora:</strong> {{ evento.hora }}</p>
    <p><strong>Texto detectado:</strong></p>
    <!--<div class="alert alert-warning">{{ evento.texto }}</div>-->
    <div class="alert alert-warning">
        {% if evento.analisis_ia %}
            {{ evento.analisis_ia }}
        {% else %}
            {{ evento.texto }}
        {% endif %}
    </div>

    <h5>Transmisión en vivo (tu cámara)</h5>
    <video id="liveVideo" autoplay playsinline></video>

    <script>
        const video = document.getElementById('liveVideo');
        navigator.mediaDevices.getUserMedia({ video: true, audio: false })
            .then(stream => {
                video.srcObject = stream;
            })
            .catch(err => {
                console.error("Error accediendo a la cámara:", err);
            });
    </script>
</body>
</html>
